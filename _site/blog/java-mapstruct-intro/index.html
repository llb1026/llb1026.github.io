<!DOCTYPE html>
<html lang="ko">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <title>JIYUN.ME | MapStruct를 써야 하는 이유</title>
    
        
    <!-- Post info -->
    <meta property="og:site_name" content="JIYUN.ME">
    <meta property="og:type" content="website" /> 
    <meta property="og:url" content="http://localhost:4000/blog/java-mapstruct-intro/" />
    
    <meta property="og:image" content="http://localhost:4000/blog/java-mapstruct-intro/img/01_1.png">

    <!-- title -->
    <meta property="og:title" content="JIYUN.ME | MapStruct를 써야 하는 이유">
    
    <!-- description -->
    <meta property="og:description" content="## 1. 인트로 프로젝트 초반, 함께 같은 파트를 개발하게 된 동료에게 JPA를 쓰자고 설득하는 과정에서 MapStruct 라이브러리도 함께 설명했었다. 기억을 되살려 MapStruct를 썼을 때의 이점, 그리고 내가 자주 쓰는 예시들을..."/>
        
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/uikit.min.css">
    <link rel="stylesheet" href="/assets/css/uikit-width-ex.min.css">
    <link rel="stylesheet" href="/assets/css/ionicons.min.css">
    <link rel="stylesheet" href="/assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/assets/css/font-awesome.css">
    <link rel="stylesheet" href="/assets/css/animations.css">
    <link rel="stylesheet" href="/assets/css/theme.css">
    <link rel="stylesheet" href="/assets/css/responsive.css">
    <link rel="stylesheet" href="/assets/css/toc.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <link rel="stylesheet" href="/assets/js/prettify/skins/github2.css">
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700%7CLora:400,400i%7CShadows+Into+Light:400" rel="stylesheet" />
    <link rel="shortcut icon" href="/assets/img/favicon_2.ico">
    

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-96635380-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-96635380-1');
    </script>

</head>

    
    <body class="loading">
        

        <!-- NavBar Start -->
        <div class="tw-preloader">
            <div data-uk-spinner></div>
        </div>

        <!-- 
        <div class="header-container tw-header uk-dark">
         -->
        <div class="header-container tw-header tw-header-transparent uk-dark" style="background-color: rgba(255, 255, 255, 0.25);">
        
            <nav class="uk-navbar-container uk-flex-center" data-uk-navbar>

                <!-- NavBar Left Logo Start -->
                <div class="uk-navbar-left">
                    <div class="tw-logo">
                        <h3 class="site-name">
                            <a href="/">JIYUN.ME</a>
                        </h3>
                    </div>
                </div>
                <!-- NavBar Left Logo End -->

                <!-- NavBar Center Menu Start -->
                <div class="uk-navbar-center" id="top">
                    <ul class="tw-main-menu uk-visible@m">
                        <li class="menu-item">
                            <a href="/"  class="normal"  class="active">Home</a>
                        </li>
                        <li class="menu-item">
                            <a href="/projects"  >Projects</a>
                        </li>
                        <li class="menu-item">
                            <a href="/blog"  class="active" >Blog</a>
                        </li>
                        <!-- <li class="menu-item">
                            <a href="/guestbook"  >Guestbook</a>
                        </li> -->
                    </ul>
                </div>
                <!-- NavBar Center Menu End -->

                <!-- NavBar Right Menu Icon Start -->
                <div class="uk-navbar-right">
                    <div class="tw-header-meta">
                        <a class="mobile-menu uk-navbar-toggle uk-hidden@m" href="#" data-uk-toggle="target: #mobile-menu-modal"><i class="ion-navicon-round"></i></a>
                    </div>
                </div>
                <!-- NavBar Right Menu Icon End -->

                <!-- NavBar Right Menu List Start -->
                <div id="mobile-menu-modal" class="uk-modal-full" data-uk-modal>
                    <div class="uk-modal-dialog">
                        <button class="uk-modal-close-full" type="button" data-uk-close></button>
                        <div class="uk-light uk-height-viewport tw-mobile-modal uk-flex uk-flex-middle uk-flex-center" data-uk-scrollspy="target:>ul>li,>div>a; cls:uk-animation-slide-bottom-medium; delay: 150;">
                            <ul class="uk-nav-default" data-uk-nav>
                                <li class="uk-nav-default">
                                    <a href="/"  class="normal"  class="active">Home</a>
                                </li>
                                <li class="uk-nav-default">
                                    <a href="/projects"  >Projects</a>
                                </li>
                                <li class="uk-nav-default">
                                    <a href="/blog"  class="active" >Blog</a>
                                </li>
                                <!-- <li class="uk-nav-default">
                                    <a href="/guestbook"  >Guestbook</a>
                                </li> -->
                            </ul>

                            <div class="tw-socials tw-socials-minimal">
                                <a href="https://github.com/llb1026" target="_blank"><i class="uk-icon-button tw-margin fa fa-github"></i></a>
                                <a href="https://www.linkedin.com/in/jiyun-lee-b19a02153" target="_blank"><i class="uk-icon-button tw-margin fa fa-linkedin"></i></a>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- NavBar Right Menu List End -->

            </nav>
        </div>
        <!-- NavBar End -->
    
        <!-- Content Start -->
        <main>
            <div class="main-container">

    
        <br /><br />
<section class="uk-section-normal uk-section-blog" style="padding-bottom: 0;">
    <div class="uk-container uk-container-small">
        <div data-uk-grid>
            <div class="content-area uk-width-expand">
                <article class="single post">
                    <div class="entry-post">
                        <div class="entry-cats tw-meta">
                            <p>tech-notes</p>
                        </div>
                        <!-- <h2 class="entry-title post-title">
                            <a href="#">MapStruct를 써야 하는 이유</a>
                        </h2> -->
                        <div class="heading-title-article post-title">
                            <h2 class="title">MapStruct를 써야 하는 이유</h2>
                        </div>
                        <div class="entry-date tw-meta">
                            <span>자주 쓰는 @Mapping 사용법 정리</span>
                        </div>

                        <!-- Blog Content Start -->
                        <div class="post-article">

                            <!-- Title Image Start -->
                            <div class="entry-media uk-padding-small">
                                <div class="tw-thumbnail" data-uk-lightbox>
                                    <img src="img/01_1.png" alt="" />
                                    <div class="image-overlay">
                                        <a href="img/01_1.png"></a>
                                    </div>
                                </div>
                            </div>
                            <!-- Title Image End -->

                            <!-- Scroll Spy TOC Start -->
                            <div class="toc">
                                <a href="#top">&#x1F446; 맨 위로</a>
                                <ul><li><a href="#1-인트로">1. 인트로</a><ul><li><a href="#1-1-mapstruct-소개">1-1. MapStruct 소개</a></li></ul></li><li><a href="#2-mapstruct-사용법">2. MapStruct 사용법</a><ul><li><a href="#2-1-mapstruct를-사용하지-않았을-때">2-1. MapStruct를 사용하지 않았을 때</a></li><li><a href="#2-2-mapstruct를-사용할-때">2-2. MapStruct를 사용할 때</a></li><li><a href="#2-3-자주-쓰는-mapping-예시">2-3. 자주 쓰는 @Mapping 예시</a></li><li><a href="#2-4-소스코드">2-4. 소스코드</a></li></ul></li></ul>
                            </div>
                            <!-- Scroll Spy TOC End -->

                            <h2 id="1-인트로">1. 인트로</h2>

<p>프로젝트 초반, 함께 같은 파트를 개발하게 된 동료에게 JPA를 쓰자고 설득하는 과정에서 MapStruct 라이브러리도 함께 설명했었다. 기억을 되살려 MapStruct를 썼을 때의 이점, 그리고 내가 자주 쓰는 예시들을 정리해보았다.</p>

<h3 id="1-1-mapstruct-소개">1-1. MapStruct 소개</h3>

<p>MapStruct는 Java Bean Mapper 라이브러리다. 주로 Entity와 DTO 간, DTO와 DTO 간 형변환 시 사용한다. 개발자가 인터페이스만 명시해주면, MapStruct가 빌드 시 자동으로 변환하는 코드를 생성한다. (<a href="https://www.baeldung.com/mapstruct">Baeldung 문서</a>)</p>

<p>MapStruct 이외에도 다른 매핑 프레임워크들이 있는데, <a href="https://www.baeldung.com/java-performance-mapping-frameworks">Baeldung 문서</a>에 따르면 JMapper와 MapStruct가 가장 좋은 성능을 보인다고 한다. modelMapper와 비교했을 때만 해도 압도적인 성능 차이가 있으니, 웬만하면 MapStruct 쓰자.</p>

<hr />

<h2 id="2-mapstruct-사용법">2. MapStruct 사용법</h2>

<p>예시로 아래와 같은 데이터 구조를 생각해보자.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">user</code> 테이블에는 사용자 정보 - 이름, 이메일, 우편번호, 도로명주소, 상세주소 데이터가 들어있다.</li>
  <li><code class="language-plaintext highlighter-rouge">vehicle</code> 테이블에는 사용자가 소유한 차량의 정보 - 번호판, 대표차량여부 데이터가 들어있다.</li>
  <li>사용자는 여러 대의 차량을 보유할 수 있고, 그 중 하나의 차량을 대표차량으로 설정할 수 있다.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">table</span> <span class="k">user</span> <span class="p">(</span>
    <span class="n">id</span>             <span class="nb">bigint</span> <span class="n">auto_increment</span> <span class="k">primary</span> <span class="k">key</span><span class="p">,</span>
    <span class="n">entity_version</span> <span class="nb">bigint</span>       <span class="k">null</span><span class="p">,</span>
    <span class="n">name</span>           <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>  <span class="k">null</span><span class="p">,</span>
    <span class="n">email</span>          <span class="nb">varchar</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">null</span><span class="p">,</span>
    <span class="n">zip_code</span>       <span class="nb">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="k">null</span><span class="p">,</span>
    <span class="n">road_address</span>   <span class="nb">varchar</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span> <span class="k">null</span><span class="p">,</span>
    <span class="n">address_detail</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span> <span class="k">null</span><span class="p">,</span>
    <span class="n">created_at</span>     <span class="nb">timestamp</span>    <span class="k">null</span><span class="p">,</span>
    <span class="n">updated_at</span>     <span class="nb">timestamp</span>    <span class="k">null</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">table</span> <span class="n">vehicle</span><span class="p">(</span>
    <span class="n">id</span>             <span class="nb">bigint</span> <span class="n">auto_increment</span> <span class="k">primary</span> <span class="k">key</span><span class="p">,</span>
    <span class="n">entity_version</span> <span class="nb">bigint</span>               <span class="k">null</span><span class="p">,</span>
    <span class="n">user_id</span>        <span class="nb">bigint</span>               <span class="k">null</span><span class="p">,</span>
    <span class="n">number_plate</span>   <span class="nb">varchar</span><span class="p">(</span><span class="mi">36</span><span class="p">)</span>          <span class="k">null</span><span class="p">,</span>
    <span class="n">represented</span>    <span class="nb">tinyint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">default</span> <span class="mi">1</span> <span class="k">null</span><span class="p">,</span>
    <span class="n">created_at</span>     <span class="nb">timestamp</span>            <span class="k">null</span><span class="p">,</span>
    <span class="n">updated_at</span>     <span class="nb">timestamp</span>            <span class="k">null</span><span class="p">,</span>
    <span class="k">constraint</span> <span class="n">vehicle_user_id_fk</span>
        <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">user_id</span><span class="p">)</span> <span class="k">references</span> <span class="k">user</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div></div>

<p>이렇게 만든 테이블을 토대로 Entity는 아래와 같이 만들 수 있다. Entity마다 공통된 컬럼들(<code class="language-plaintext highlighter-rouge">id</code>, <code class="language-plaintext highlighter-rouge">entity_version</code>, <code class="language-plaintext highlighter-rouge">created_at</code>, <code class="language-plaintext highlighter-rouge">updated_at</code>)은 별도의 BaseEntity로 분리했다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserEntity</span> <span class="kd">extends</span> <span class="nc">BaseEntity</span> <span class="kd">implements</span> <span class="nc">Serializable</span> <span class="o">{</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"name"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"email"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"zip_code"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">zipCode</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"road_address"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">roadAddress</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"address_detail"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">addressDetail</span><span class="o">;</span>

<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VehicleEntity</span> <span class="kd">extends</span> <span class="nc">BaseEntity</span> <span class="kd">implements</span> <span class="nc">Serializable</span> <span class="o">{</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"user_id"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">userId</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"number_plate"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">numberPlate</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"represented"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Boolean</span> <span class="n">represented</span><span class="o">;</span>

<span class="o">}</span>
</code></pre></div></div>

<p>그리고 Service 로직에서 사용할 DTO 구조는 아래와 같다고 가정한다. (Entity와 동일한 필드를 갖고 있는 BaseDTO는 본문에서 생략한다)</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserCustomDto</span> <span class="kd">implements</span> <span class="nc">Serializable</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">AddressDto</span> <span class="n">address</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">VehicleCustomDto</span><span class="o">&gt;</span> <span class="n">vehicleList</span><span class="o">;</span>

<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AddressDto</span> <span class="kd">implements</span> <span class="nc">Serializable</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">zipCode</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">roadAddress</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">addressDetail</span><span class="o">;</span>

<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VehicleCustomDto</span> <span class="kd">implements</span> <span class="nc">Serializable</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">numberPlate</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">represented</span><span class="o">;</span>

<span class="o">}</span>
</code></pre></div></div>

<h3 id="2-1-mapstruct를-사용하지-않았을-때">2-1. MapStruct를 사용하지 않았을 때</h3>

<p>사용자의 아이디로 사용자 정보와 사용자의 차량정보를 리턴하는 API를 만든다고 하자. <code class="language-plaintext highlighter-rouge">user</code> 테이블에서는 <code class="language-plaintext highlighter-rouge">findById</code>로, <code class="language-plaintext highlighter-rouge">vehicle</code> 테이블에서는 <code class="language-plaintext highlighter-rouge">findByUserId</code>로 원하는 데이터 Entity들을 확보한다.</p>

<p>이제 응답값으로 <code class="language-plaintext highlighter-rouge">UserCustomDto</code>를 리턴해야 하는데, 별도의 매퍼를 사용하지 않는다면 개발자가 직접 Entity에서 DTO로 변환하는 코드를 작성해줘야 한다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">UserCustomDto</span> <span class="nf">convert</span><span class="o">(</span><span class="nc">UserEntity</span> <span class="n">user</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">VehicleEntity</span><span class="o">&gt;</span> <span class="n">vehicleList</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">UserCustomDto</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
            <span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">())</span>
            <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">())</span>
            <span class="o">.</span><span class="na">email</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">())</span>
            <span class="o">.</span><span class="na">address</span><span class="o">(</span><span class="nc">AddressDto</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">roadAddress</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getRoadAddress</span><span class="o">())</span>
                    <span class="o">.</span><span class="na">addressDetail</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getAddressDetail</span><span class="o">())</span>
                    <span class="o">.</span><span class="na">zipCode</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getZipCode</span><span class="o">())</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">())</span>
            <span class="o">.</span><span class="na">vehicleList</span><span class="o">(</span><span class="n">vehicleList</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">map</span><span class="o">(</span><span class="n">vehicle</span> <span class="o">-&gt;</span> <span class="nc">VehicleCustomDto</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="n">vehicle</span><span class="o">.</span><span class="na">getId</span><span class="o">())</span>
                    <span class="o">.</span><span class="na">numberPlate</span><span class="o">(</span><span class="n">vehicle</span><span class="o">.</span><span class="na">getNumberPlate</span><span class="o">())</span>
                    <span class="o">.</span><span class="na">represented</span><span class="o">(</span><span class="n">vehicle</span><span class="o">.</span><span class="na">getRepresented</span><span class="o">()</span> <span class="o">?</span> <span class="s">"대표차량"</span> <span class="o">:</span> <span class="s">"일반차량"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">()).</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">()))</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>필요한 모든 객체 간에 변환메소드를 일일히 작성해야 하는 것도 귀찮은데, 데이터 타입이 변경되거나 데이터 depth가 더 깊어지면 훨씬 더 복잡하고 귀찮아진다. 또한 저 엄청나게 길어지는 변환메소드를 둘 곳도 마땅치않고, 누군가 알게모르게 수정할 지 모르는 소스코드로 관리하는 것도 찜찜하다.</p>

<h3 id="2-2-mapstruct를-사용할-때">2-2. MapStruct를 사용할 때</h3>

<p>위와 같은 노가다를 MapStruct에게 맡길 수 있다. 아래와 같이 인터페이스에 어떻게 변환해야 하는지를 명시해주면 MapStruct가 변환코드를 자동으로 생성한다.</p>

<p>먼저 가장 기본적으로, Entity에서 BaseDTO, BaseDTO에서 Entity로의 변환은 <code class="language-plaintext highlighter-rouge">GenericMapper</code>에서 정의한 메소드를 오버라이딩하면 끝이다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GenericMapper</span><span class="o">&lt;</span><span class="no">D</span><span class="o">,</span> <span class="no">E</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="no">D</span> <span class="nf">toDto</span><span class="o">(</span><span class="no">E</span> <span class="n">entity</span><span class="o">);</span>
    <span class="no">E</span> <span class="nf">toEntity</span><span class="o">(</span><span class="no">D</span> <span class="n">dto</span><span class="o">);</span>

    <span class="nd">@BeanMapping</span><span class="o">(</span><span class="n">nullValuePropertyMappingStrategy</span> <span class="o">=</span> <span class="nc">NullValuePropertyMappingStrategy</span><span class="o">.</span><span class="na">IGNORE</span><span class="o">)</span>
    <span class="kt">void</span> <span class="nf">updateFromDto</span><span class="o">(</span><span class="no">D</span> <span class="n">dto</span><span class="o">,</span> <span class="nd">@MappingTarget</span> <span class="no">E</span> <span class="n">entity</span><span class="o">);</span>

    <span class="nc">List</span><span class="o">&lt;</span><span class="no">D</span><span class="o">&gt;</span> <span class="nf">getDtoList</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">entityList</span><span class="o">);</span>

<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Mapper</span><span class="o">(</span><span class="n">componentModel</span> <span class="o">=</span> <span class="s">"spring"</span><span class="o">,</span>
        <span class="n">unmappedTargetPolicy</span> <span class="o">=</span> <span class="nc">ReportingPolicy</span><span class="o">.</span><span class="na">IGNORE</span><span class="o">,</span>
        <span class="n">unmappedSourcePolicy</span> <span class="o">=</span> <span class="nc">ReportingPolicy</span><span class="o">.</span><span class="na">IGNORE</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="kd">extends</span> <span class="nc">GenericMapper</span><span class="o">&lt;</span><span class="nc">UserBaseDto</span><span class="o">,</span> <span class="nc">UserEntity</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="nc">UserBaseDto</span> <span class="nf">toDto</span><span class="o">(</span><span class="nc">UserEntity</span> <span class="n">entity</span><span class="o">);</span>

    <span class="nd">@Override</span>
    <span class="nc">UserEntity</span> <span class="nf">toEntity</span><span class="o">(</span><span class="nc">UserBaseDto</span> <span class="n">dto</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>이렇게 선언해주고 빌드하면, 프로젝트의 <code class="language-plaintext highlighter-rouge">build/generated/source/annotationProcessor/</code> 하위에 <code class="language-plaintext highlighter-rouge">~MapperImpl</code>가 생성된 것을 확인할 수 있다.</p>

<p>MapStruct가 위의 인터페이스를 토대로 자동생성한 코드는 아래와 같다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="nc">UserBaseDto</span> <span class="nf">toDto</span><span class="o">(</span><span class="nc">UserEntity</span> <span class="n">entity</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">entity</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nc">UserBaseDtoBuilder</span> <span class="n">userBaseDto</span> <span class="o">=</span> <span class="nc">UserBaseDto</span><span class="o">.</span><span class="na">builder</span><span class="o">();</span>

    <span class="n">userBaseDto</span><span class="o">.</span><span class="na">id</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">userBaseDto</span><span class="o">.</span><span class="na">entityVersion</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getEntityVersion</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">userBaseDto</span><span class="o">.</span><span class="na">name</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">userBaseDto</span><span class="o">.</span><span class="na">email</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getEmail</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">userBaseDto</span><span class="o">.</span><span class="na">zipCode</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getZipCode</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">userBaseDto</span><span class="o">.</span><span class="na">roadAddress</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getRoadAddress</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">userBaseDto</span><span class="o">.</span><span class="na">addressDetail</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getAddressDetail</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">userBaseDto</span><span class="o">.</span><span class="na">createdAt</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getCreatedAt</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">userBaseDto</span><span class="o">.</span><span class="na">updatedAt</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getUpdatedAt</span><span class="o">()</span> <span class="o">);</span>

    <span class="k">return</span> <span class="n">userBaseDto</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>

<span class="nd">@Override</span>
<span class="kd">public</span> <span class="nc">UserEntity</span> <span class="nf">toEntity</span><span class="o">(</span><span class="nc">UserBaseDto</span> <span class="n">dto</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nc">UserEntityBuilder</span> <span class="n">userEntity</span> <span class="o">=</span> <span class="nc">UserEntity</span><span class="o">.</span><span class="na">builder</span><span class="o">();</span>

    <span class="n">userEntity</span><span class="o">.</span><span class="na">name</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">userEntity</span><span class="o">.</span><span class="na">email</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getEmail</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">userEntity</span><span class="o">.</span><span class="na">zipCode</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getZipCode</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">userEntity</span><span class="o">.</span><span class="na">roadAddress</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getRoadAddress</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">userEntity</span><span class="o">.</span><span class="na">addressDetail</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getAddressDetail</span><span class="o">()</span> <span class="o">);</span>

    <span class="k">return</span> <span class="n">userEntity</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h3 id="2-3-자주-쓰는-mapping-예시">2-3. 자주 쓰는 @Mapping 예시</h3>

<p>필드 구조가 똑같은 Entity와 BaseDTO 간의 매핑은 확인했으니, 이제 CustomDTO로 세부 매핑하는 방법을 알아보자.</p>

<p>우선 인터페이스 전문을 먼저 올리고, 밑에 하나씩 설명을 달도록 하겠다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Mapper</span><span class="o">(</span><span class="n">componentModel</span> <span class="o">=</span> <span class="s">"spring"</span><span class="o">,</span>
        <span class="n">unmappedTargetPolicy</span> <span class="o">=</span> <span class="nc">ReportingPolicy</span><span class="o">.</span><span class="na">IGNORE</span><span class="o">,</span>
        <span class="n">unmappedSourcePolicy</span> <span class="o">=</span> <span class="nc">ReportingPolicy</span><span class="o">.</span><span class="na">IGNORE</span><span class="o">,</span>
        <span class="n">uses</span> <span class="o">=</span> <span class="o">{</span> <span class="nc">VehicleMapper</span><span class="o">.</span><span class="na">class</span> <span class="o">},</span>
        <span class="n">imports</span> <span class="o">=</span> <span class="o">{</span> <span class="nc">AddressDto</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">UserCustomDto</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">VehicleCustomDto</span><span class="o">.</span><span class="na">class</span> <span class="o">})</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="kd">extends</span> <span class="nc">GenericMapper</span><span class="o">&lt;</span><span class="nc">UserBaseDto</span><span class="o">,</span> <span class="nc">UserEntity</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="nc">UserBaseDto</span> <span class="nf">toDto</span><span class="o">(</span><span class="nc">UserEntity</span> <span class="n">entity</span><span class="o">);</span>

    <span class="nd">@Override</span>
    <span class="nc">UserEntity</span> <span class="nf">toEntity</span><span class="o">(</span><span class="nc">UserBaseDto</span> <span class="n">dto</span><span class="o">);</span>

    <span class="nd">@Named</span><span class="o">(</span><span class="s">"toCustomUserDto"</span><span class="o">)</span>
    <span class="nd">@Mapping</span><span class="o">(</span><span class="n">target</span> <span class="o">=</span> <span class="s">"address"</span><span class="o">,</span> <span class="n">expression</span> <span class="o">=</span> <span class="s">"java(AddressDto.builder()"</span> <span class="o">+</span>
            <span class="s">".zipCode(userBaseDto.getZipCode())"</span> <span class="o">+</span>
            <span class="s">".roadAddress(userBaseDto.getRoadAddress())"</span> <span class="o">+</span>
            <span class="s">".addressDetail(userBaseDto.getAddressDetail()).build())"</span><span class="o">)</span>
    <span class="nd">@Mapping</span><span class="o">(</span><span class="n">target</span> <span class="o">=</span> <span class="s">"vehicleList"</span><span class="o">,</span> <span class="n">source</span> <span class="o">=</span> <span class="s">"vehicleBaseDtoList"</span><span class="o">,</span> <span class="n">qualifiedByName</span> <span class="o">=</span> <span class="s">"toCustomVehicleDto"</span><span class="o">)</span>
    <span class="nc">UserCustomDto</span> <span class="nf">toCustomDto</span><span class="o">(</span><span class="nc">UserBaseDto</span> <span class="n">userBaseDto</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">VehicleBaseDto</span><span class="o">&gt;</span> <span class="n">vehicleBaseDtoList</span><span class="o">);</span>

<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Mapper</span><span class="o">(</span><span class="n">componentModel</span> <span class="o">=</span> <span class="s">"spring"</span><span class="o">,</span>
        <span class="n">unmappedTargetPolicy</span> <span class="o">=</span> <span class="nc">ReportingPolicy</span><span class="o">.</span><span class="na">IGNORE</span><span class="o">,</span>
        <span class="n">unmappedSourcePolicy</span> <span class="o">=</span> <span class="nc">ReportingPolicy</span><span class="o">.</span><span class="na">IGNORE</span><span class="o">,</span>
        <span class="n">imports</span> <span class="o">=</span> <span class="o">{</span> <span class="nc">VehicleCustomDto</span><span class="o">.</span><span class="na">class</span> <span class="o">})</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">VehicleMapper</span> <span class="kd">extends</span> <span class="nc">GenericMapper</span><span class="o">&lt;</span><span class="nc">VehicleBaseDto</span><span class="o">,</span> <span class="nc">VehicleEntity</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="nc">VehicleBaseDto</span> <span class="nf">toDto</span><span class="o">(</span><span class="nc">VehicleEntity</span> <span class="n">entity</span><span class="o">);</span>

    <span class="nd">@Override</span>
    <span class="nc">VehicleEntity</span> <span class="nf">toEntity</span><span class="o">(</span><span class="nc">VehicleBaseDto</span> <span class="n">dto</span><span class="o">);</span>

    <span class="nd">@Named</span><span class="o">(</span><span class="s">"toCustomVehicleDto"</span><span class="o">)</span>
    <span class="nd">@Mapping</span><span class="o">(</span><span class="n">target</span> <span class="o">=</span> <span class="s">"represented"</span><span class="o">,</span> <span class="n">expression</span> <span class="o">=</span> <span class="s">"java(baseDto.getRepresented() ? \"대표차량\" : \"일반차량\")"</span><span class="o">)</span>
    <span class="nc">VehicleCustomDto</span> <span class="nf">toCustomDto</span><span class="o">(</span><span class="nc">VehicleBaseDto</span> <span class="n">baseDto</span><span class="o">);</span>

<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">@Mapper</code> 어노테이션으로 본 인터페이스가 매퍼라고 명시한다.</li>
  <li><code class="language-plaintext highlighter-rouge">unmappedTargetPolicy</code>는 변환대상의 어떤 컬럼이 매핑되지 않았을 때 처리방식을 명시한다. <code class="language-plaintext highlighter-rouge">ReportingPolicy.IGNORE</code>은 매핑되지 않았어도 리포트 하지 않고 넘어간다.</li>
  <li><code class="language-plaintext highlighter-rouge">unmappedSourcePolicy</code>는 위와 동일하게 변환소스가 매핑되지 않았을 때 처리방식을 명시한다.</li>
  <li><code class="language-plaintext highlighter-rouge">@Named</code>는 매핑 메소드에 특정 qualifier name을 붙여줄 때 사용한다. 위에서의 예시로, <code class="language-plaintext highlighter-rouge">VehicleMapper</code>에서 <code class="language-plaintext highlighter-rouge">toCustomDto</code>에 <code class="language-plaintext highlighter-rouge">@Named("toCustomVehicleDto")</code>을 달아주고, <code class="language-plaintext highlighter-rouge">UserMapper</code>에서 <code class="language-plaintext highlighter-rouge">@Mapping(target = "vehicleList", source = "vehicleBaseDtoList", qualifiedByName = "toCustomVehicleDto")</code>와 같이 사용할 수 있다.</li>
  <li><code class="language-plaintext highlighter-rouge">target</code>은 변환대상의 필드명이다.</li>
  <li><code class="language-plaintext highlighter-rouge">source</code>는 매핑 메소드 파라미터의 데이터들로부터 직접 접근해 변환소스를 명시하는 방법이다.</li>
  <li><code class="language-plaintext highlighter-rouge">expression</code>은 파라미터의 데이터들로부터 바로 데이터를 가져올 수 없을 경우, 추가 변환이 필요한 경우 <code class="language-plaintext highlighter-rouge">java()</code> 표현 안에 JAVA 문법으로 변환소스를 명시하는 방법이다.</li>
  <li><code class="language-plaintext highlighter-rouge">uses</code>는 매핑 메소드에서 다른 매퍼를 사용할 때 해당 매퍼를 명시한다.</li>
  <li><code class="language-plaintext highlighter-rouge">imports</code>는 매핑 메소드에서 <code class="language-plaintext highlighter-rouge">expression</code>으로 JAVA 문법 사용 시 필요한 추가 클래스들을 명시한다.</li>
</ul>

<p>이렇게 명시한 인터페이스로 MapStruct가 자동생성한 변환코드는 아래와 같다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserMapperImpl</span> <span class="kd">implements</span> <span class="nc">UserMapper</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">VehicleMapper</span> <span class="n">vehicleMapper</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateFromDto</span><span class="o">(</span><span class="nc">UserBaseDto</span> <span class="n">dto</span><span class="o">,</span> <span class="nc">UserEntity</span> <span class="n">entity</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getEntityVersion</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setEntityVersion</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getEntityVersion</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getCreatedAt</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setCreatedAt</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getCreatedAt</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getUpdatedAt</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setUpdatedAt</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getUpdatedAt</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getEmail</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getEmail</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getZipCode</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setZipCode</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getZipCode</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getRoadAddress</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setRoadAddress</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getRoadAddress</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getAddressDetail</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setAddressDetail</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getAddressDetail</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">UserBaseDto</span><span class="o">&gt;</span> <span class="nf">getDtoList</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">UserEntity</span><span class="o">&gt;</span> <span class="n">entityList</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">entityList</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">UserBaseDto</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">UserBaseDto</span><span class="o">&gt;(</span> <span class="n">entityList</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span> <span class="nc">UserEntity</span> <span class="n">userEntity</span> <span class="o">:</span> <span class="n">entityList</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span> <span class="n">toDto</span><span class="o">(</span> <span class="n">userEntity</span> <span class="o">)</span> <span class="o">);</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">UserBaseDto</span> <span class="nf">toDto</span><span class="o">(</span><span class="nc">UserEntity</span> <span class="n">entity</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">entity</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nc">UserBaseDtoBuilder</span> <span class="n">userBaseDto</span> <span class="o">=</span> <span class="nc">UserBaseDto</span><span class="o">.</span><span class="na">builder</span><span class="o">();</span>

        <span class="n">userBaseDto</span><span class="o">.</span><span class="na">id</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">userBaseDto</span><span class="o">.</span><span class="na">entityVersion</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getEntityVersion</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">userBaseDto</span><span class="o">.</span><span class="na">name</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">userBaseDto</span><span class="o">.</span><span class="na">email</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getEmail</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">userBaseDto</span><span class="o">.</span><span class="na">zipCode</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getZipCode</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">userBaseDto</span><span class="o">.</span><span class="na">roadAddress</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getRoadAddress</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">userBaseDto</span><span class="o">.</span><span class="na">addressDetail</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getAddressDetail</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">userBaseDto</span><span class="o">.</span><span class="na">createdAt</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getCreatedAt</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">userBaseDto</span><span class="o">.</span><span class="na">updatedAt</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getUpdatedAt</span><span class="o">()</span> <span class="o">);</span>

        <span class="k">return</span> <span class="n">userBaseDto</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">UserEntity</span> <span class="nf">toEntity</span><span class="o">(</span><span class="nc">UserBaseDto</span> <span class="n">dto</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nc">UserEntityBuilder</span> <span class="n">userEntity</span> <span class="o">=</span> <span class="nc">UserEntity</span><span class="o">.</span><span class="na">builder</span><span class="o">();</span>

        <span class="n">userEntity</span><span class="o">.</span><span class="na">name</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">userEntity</span><span class="o">.</span><span class="na">email</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getEmail</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">userEntity</span><span class="o">.</span><span class="na">zipCode</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getZipCode</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">userEntity</span><span class="o">.</span><span class="na">roadAddress</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getRoadAddress</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">userEntity</span><span class="o">.</span><span class="na">addressDetail</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getAddressDetail</span><span class="o">()</span> <span class="o">);</span>

        <span class="k">return</span> <span class="n">userEntity</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">UserCustomDto</span> <span class="nf">toCustomDto</span><span class="o">(</span><span class="nc">UserBaseDto</span> <span class="n">userBaseDto</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">VehicleBaseDto</span><span class="o">&gt;</span> <span class="n">vehicleBaseDtoList</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">userBaseDto</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">vehicleBaseDtoList</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nc">UserCustomDtoBuilder</span> <span class="n">userCustomDto</span> <span class="o">=</span> <span class="nc">UserCustomDto</span><span class="o">.</span><span class="na">builder</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(</span> <span class="n">userBaseDto</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">userCustomDto</span><span class="o">.</span><span class="na">id</span><span class="o">(</span> <span class="n">userBaseDto</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">);</span>
            <span class="n">userCustomDto</span><span class="o">.</span><span class="na">name</span><span class="o">(</span> <span class="n">userBaseDto</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">);</span>
            <span class="n">userCustomDto</span><span class="o">.</span><span class="na">email</span><span class="o">(</span> <span class="n">userBaseDto</span><span class="o">.</span><span class="na">getEmail</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">vehicleBaseDtoList</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">userCustomDto</span><span class="o">.</span><span class="na">vehicleList</span><span class="o">(</span> <span class="n">vehicleBaseDtoListToVehicleCustomDtoList</span><span class="o">(</span> <span class="n">vehicleBaseDtoList</span> <span class="o">)</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="n">userCustomDto</span><span class="o">.</span><span class="na">address</span><span class="o">(</span> <span class="nc">AddressDto</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">zipCode</span><span class="o">(</span><span class="n">userBaseDto</span><span class="o">.</span><span class="na">getZipCode</span><span class="o">()).</span><span class="na">roadAddress</span><span class="o">(</span><span class="n">userBaseDto</span><span class="o">.</span><span class="na">getRoadAddress</span><span class="o">()).</span><span class="na">addressDetail</span><span class="o">(</span><span class="n">userBaseDto</span><span class="o">.</span><span class="na">getAddressDetail</span><span class="o">()).</span><span class="na">build</span><span class="o">()</span> <span class="o">);</span>

        <span class="k">return</span> <span class="n">userCustomDto</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">VehicleCustomDto</span><span class="o">&gt;</span> <span class="nf">vehicleBaseDtoListToVehicleCustomDtoList</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">VehicleBaseDto</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">list</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">VehicleCustomDto</span><span class="o">&gt;</span> <span class="n">list1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">VehicleCustomDto</span><span class="o">&gt;(</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span> <span class="nc">VehicleBaseDto</span> <span class="n">vehicleBaseDto</span> <span class="o">:</span> <span class="n">list</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">list1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span> <span class="n">vehicleMapper</span><span class="o">.</span><span class="na">toCustomDto</span><span class="o">(</span> <span class="n">vehicleBaseDto</span> <span class="o">)</span> <span class="o">);</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">list1</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">VehicleMapperImpl</span> <span class="kd">implements</span> <span class="nc">VehicleMapper</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateFromDto</span><span class="o">(</span><span class="nc">VehicleBaseDto</span> <span class="n">dto</span><span class="o">,</span> <span class="nc">VehicleEntity</span> <span class="n">entity</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getEntityVersion</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setEntityVersion</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getEntityVersion</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getCreatedAt</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setCreatedAt</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getCreatedAt</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getUpdatedAt</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setUpdatedAt</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getUpdatedAt</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getUserId</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setUserId</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getUserId</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getNumberPlate</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setNumberPlate</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getNumberPlate</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getRepresented</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">entity</span><span class="o">.</span><span class="na">setRepresented</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getRepresented</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">VehicleBaseDto</span><span class="o">&gt;</span> <span class="nf">getDtoList</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">VehicleEntity</span><span class="o">&gt;</span> <span class="n">entityList</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">entityList</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">VehicleBaseDto</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">VehicleBaseDto</span><span class="o">&gt;(</span> <span class="n">entityList</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span> <span class="nc">VehicleEntity</span> <span class="n">vehicleEntity</span> <span class="o">:</span> <span class="n">entityList</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span> <span class="n">toDto</span><span class="o">(</span> <span class="n">vehicleEntity</span> <span class="o">)</span> <span class="o">);</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">VehicleBaseDto</span> <span class="nf">toDto</span><span class="o">(</span><span class="nc">VehicleEntity</span> <span class="n">entity</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">entity</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nc">VehicleBaseDtoBuilder</span> <span class="n">vehicleBaseDto</span> <span class="o">=</span> <span class="nc">VehicleBaseDto</span><span class="o">.</span><span class="na">builder</span><span class="o">();</span>

        <span class="n">vehicleBaseDto</span><span class="o">.</span><span class="na">id</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">vehicleBaseDto</span><span class="o">.</span><span class="na">entityVersion</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getEntityVersion</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">vehicleBaseDto</span><span class="o">.</span><span class="na">userId</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getUserId</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">vehicleBaseDto</span><span class="o">.</span><span class="na">numberPlate</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getNumberPlate</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">vehicleBaseDto</span><span class="o">.</span><span class="na">represented</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getRepresented</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">vehicleBaseDto</span><span class="o">.</span><span class="na">createdAt</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getCreatedAt</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">vehicleBaseDto</span><span class="o">.</span><span class="na">updatedAt</span><span class="o">(</span> <span class="n">entity</span><span class="o">.</span><span class="na">getUpdatedAt</span><span class="o">()</span> <span class="o">);</span>

        <span class="k">return</span> <span class="n">vehicleBaseDto</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">VehicleEntity</span> <span class="nf">toEntity</span><span class="o">(</span><span class="nc">VehicleBaseDto</span> <span class="n">dto</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">dto</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nc">VehicleEntityBuilder</span> <span class="n">vehicleEntity</span> <span class="o">=</span> <span class="nc">VehicleEntity</span><span class="o">.</span><span class="na">builder</span><span class="o">();</span>

        <span class="n">vehicleEntity</span><span class="o">.</span><span class="na">userId</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getUserId</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">vehicleEntity</span><span class="o">.</span><span class="na">numberPlate</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getNumberPlate</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">vehicleEntity</span><span class="o">.</span><span class="na">represented</span><span class="o">(</span> <span class="n">dto</span><span class="o">.</span><span class="na">getRepresented</span><span class="o">()</span> <span class="o">);</span>

        <span class="k">return</span> <span class="n">vehicleEntity</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">VehicleCustomDto</span> <span class="nf">toCustomDto</span><span class="o">(</span><span class="nc">VehicleBaseDto</span> <span class="n">baseDto</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">baseDto</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nc">VehicleCustomDtoBuilder</span> <span class="n">vehicleCustomDto</span> <span class="o">=</span> <span class="nc">VehicleCustomDto</span><span class="o">.</span><span class="na">builder</span><span class="o">();</span>

        <span class="n">vehicleCustomDto</span><span class="o">.</span><span class="na">id</span><span class="o">(</span> <span class="n">baseDto</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">);</span>
        <span class="n">vehicleCustomDto</span><span class="o">.</span><span class="na">numberPlate</span><span class="o">(</span> <span class="n">baseDto</span><span class="o">.</span><span class="na">getNumberPlate</span><span class="o">()</span> <span class="o">);</span>

        <span class="n">vehicleCustomDto</span><span class="o">.</span><span class="na">represented</span><span class="o">(</span> <span class="n">baseDto</span><span class="o">.</span><span class="na">getRepresented</span><span class="o">()</span> <span class="o">?</span> <span class="s">"대표차량"</span> <span class="o">:</span> <span class="s">"일반차량"</span> <span class="o">);</span>

        <span class="k">return</span> <span class="n">vehicleCustomDto</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h3 id="2-4-소스코드">2-4. 소스코드</h3>

<p>위 케이스를 바탕으로 작성한 어플리케이션 소스코드는 <a href="https://github.com/llb1026/mapstruct_practice">Github</a> 에서 확인할 수 있다.</p>


                        </div>
                        <!-- Blog Content Start -->
                    </div>
                </article>
            </div>
        </div>
    </div>
</section>

<!-- Pagination Start -->
<section class="uk-section uk-section-small">
    <div class="uk-container uk-container-small">
        <div class="tw-portfolio-nav uk-flex uk-flex-between uk-flex-middle">
            
            <div class="nav-prev tw-meta">
                <a href="../mariadb-sql-mode-oracle/">
                    <i class="ion-ios-arrow-left"></i>
                    <span>Prev</span>
                </a>
            </div>
            
            <div class="nav-link">
                <a href="/blog">
                    <i class="ion-grid"></i>
                </a>
            </div>
            
            <div class="nav-next tw-meta" style="visibility: hidden">
                <a href="#">
                    <span>Next</span>
                    <i class="ion-ios-arrow-right"></i>
                </a>
            </div>
            
        </div>
    </div>
</section>
<!-- Pagination End -->


<script>
    function getTOCNodes(master) {
        var nodes = Array.prototype.slice.call(master.getElementsByTagName("*"), 0);
        var tocNodes = nodes.filter(function(elem) {
            return elem.tagName == "A";
        });
        return tocNodes;
    }
    function getHeaderNodes(master) {
        var nodes = Array.prototype.slice.call(master.getElementsByTagName("*"), 0);
        var headerNodes = nodes.filter(function(elem) {
            return elem.tagName == "H1" || elem.tagName == "H2" || elem.tagName == "H3";
        });
        return headerNodes;
    }
  
    var title = document.getElementsByClassName("post-title")[0];
    var titleY = window.pageYOffset + title.getBoundingClientRect().top;
    
    var article = document.getElementsByClassName("post-article")[0];
    var articleY = window.pageYOffset + article.getBoundingClientRect().top;
  
    var toc = document.getElementsByClassName("toc")[0];
  
    var headerNodes = getHeaderNodes(article);
    var tocNodes = getTOCNodes(toc);
  
    var before = undefined;
  
    document.addEventListener('scroll', function(e) {
        if (window.scrollY >= articleY - 60) {
            toc.style.cssText = "position: fixed; top: 60px;";
        }
        else {
            toc.style.cssText = "";
        }
    
        var current = headerNodes.filter(function(header) {
            var headerY = window.pageYOffset + header.getBoundingClientRect().top;
            return window.scrollY >= headerY - 200;
        });
  
        if (current.length > 0) {
            current = current[current.length-1];
    
            var currentA = tocNodes.filter(function(tocNode) {
                return tocNode.innerHTML == current.innerHTML;
            })
            
            currentA = currentA[0];
            if (currentA) {
                if (before == undefined) before = currentA;
        
                if (before != currentA) {
                    before.classList.remove("toc-active");
                    before = currentA;
                }
        
                currentA.classList.add("toc-active");
            }
            else {
                if (before) 
                    before.classList.remove("toc-active");
            }
        }
        else {
            if (before) 
                before.classList.remove("toc-active");
        }
    }, false);
</script>

    
    
</div>


        </main>
        <!-- Content End -->
      
        <footer class="uk-section uk-padding-remove-vertical uk-light">
    <div class="footer-area footer-small">
        <div class="uk-container">
            <div class="uk-flex-middle uk-child-width-1-3" data-uk-grid>
                <div class="tw-element tw-socials tw-no-bg with-hover">
                    <a href="https://github.com/llb1026" target="_blank"><i class="uk-icon-button tw-margin fa fa-github"></i></a>
                    <a href="https://www.linkedin.com/in/jiyun-lee-b19a02153" target="_blank"><i class="uk-icon-button tw-margin fa fa-linkedin"></i></a>
                </div>
                <div class="uk-text-center copyright">
                    © JIYUN.ME
                </div>
                <div class="uk-text-right">
                    <a href="" data-uk-scroll>Top &nbsp;&nbsp;<i class="ion-ios-arrow-up"></i></a>
                </div>
            </div>
        </div>
    </div>
</footer>

   
        <script src="/assets/js/jquery-3.2.0.min.js"></script>
        <script src="/assets/js/jquery.easypiechart.min.js"></script>
        <script src="/assets/js/uikit.min.js"></script>
        <script src="/assets/js/uikit-icons.min.js"></script>
        <script src="/assets/js/isotope.pkgd.min.js"></script>
        <script src="/assets/js/owl.carousel.min.js"></script>
        <script src="/assets/js/theme.js"></script>
        

    </body>
</html>
